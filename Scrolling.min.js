var Scrolling=Scrolling||(function(e,b){var g=e.document;var d;var c={forEach:function(o,n){var m,k;if(o instanceof Array||(o.length!==b&&typeof o.length==="number")){for(m=0,k=o.length;m<k;m++){if(n.call(o[m],m,o[m])===false){break}}}else{for(m in o){if(n.call(o[m],m,o[m])===false){break}}}},bind:(function(){if(e.attachEvent!==b){return function(m,k,l){m["evt"+k+l]=l;m[k+l]=function(){m["evt"+k+l](e.event)};m.attachEvent("on"+k,m[k+l])}}else{return function(m,k,l){m.addEventListener(k,l,false)}}}()),getOffset:function(n){if(!n||n.nodeName===b){return{top:0,left:0}}var m=0;var k=0;var l=n;while(l){m+=l.offsetLeft;k+=l.offsetTop;l=l.offsetParent}return{top:k,left:m}}};(function(){var m=function(q,o,p){var n;if(!o){throw new Error("No selector provided for help query")}else{if(typeof o==="string"){if(typeof p==="string"){n=c.queryOne(p)}else{n=p||g}return n[q](o)}else{if(typeof o==="object"&&o.nodeName!==b){return[o]}}}};var l=function(n,o){return $(n,(o||null)).toArray()};var k=function(){throw new Error("help query has no power here - please provide jQuery or a newer browser.")};if(g.querySelectorAll!==b){c.query=function(n,o){return m("querySelectorAll",n,o)};c.queryOne=function(n,o){return m("querySelector",n,o)}}else{if(e.jQuery!==b){c.query=function(n,o){return l(n,o)};c.queryOne=function(n,o){return l(n,o)[0]}}else{c.query=c.queryOne=k}}}());var h=(function(m){var l=function(){return{x:e.scrollX,y:e.scrollY}};var k=function(){return{x:m.scrollLeft,y:m.scrollTop}};return typeof e.scrollY==="number"?l:k}(g.documentElement));var i=(function(n){var m;var l=function(o,q,p){m.stop().animate({scrollLeft:o,scrollTop:q},2000,p)};var k=function(o,q,p){e.scrollTo(o,q);p&&p()};if(n){m=$(e.navigator.userAgent.indexOf("Chrome")>-1?g.body:g.documentElement);return l}else{return k}}(e.jQuery!==b));var a=function(k){var l;if(!k){throw new Error("No good argument was supplied for this element in parseNode.")}if(typeof k==="string"){l=c.queryOne(k)}else{if(typeof k==="function"){l=k()}else{if(typeof k==="object"&&k.nodeName!==b){l=k}}}if(l.nodeName===b){throw new Error("No useful DOM node was found in parseNode")}return l};var j=(function(){var k=function(l){this.domNode=a(l);this.setData();this.debugmode=false;this.position={x:0,y:0};this.visible=false;this.scrollPercent={x:0,y:0}};k.prototype={debug:function(){if(this.debugmode){return}this.debugmode=true;var l;var q=(Math.floor(Math.random()*16777215)).toString(16);var r="#"+q;var m=g.createElement("div");var p=g.createElement("div");var o={position:"fixed",zIndex:99999,background:"#000",color:r,padding:"1em",font:'12px/1.4em "Consolas", "Courier New", monospace'};for(l in o){m.style[l]=o[l]}o={position:"fixed",background:"rgba(20,20,20,0.2)",zIndex:99998,border:"2px solid "+r,width:this.width+"px",height:this.height+"px",top:"0px",left:"0px"};for(l in o){p.style[l]=o[l]}g.body.appendChild(m);g.body.appendChild(p);var n=this.onScroll;this.onScroll=function(){if(!this.visible){m.style.display="none";p.style.display="none";return}else{m.style.display="block";p.style.display="block"}var s="position: {x: "+this.position.x+", y: "+this.position.y+"}<br />";s+="Scroll range: {x: "+this.scrollRange.x+", y: "+this.scrollRange.y+"}<br />";s+="Scroll completion: { x: "+parseInt(this.scrollPercent.x*100000,10)/1000+"%, ";s+="y:"+parseInt(this.scrollPercent.y*100000,10)/1000+"%<br />";s+="offset: {top: "+this.offset.top+", left: "+this.offset.left+"}<br />";s+="width: "+this.width+"px <br />height: "+this.height+"<br />";m.innerHTML=s;m.style.top=p.style.top=this.position.y+"px";m.style.left=p.style.left=this.position.x+"px";n.call(this)}},setData:function(){this.offset=c.getOffset(this.domNode);this.height=this.domNode.clientHeight;this.width=this.domNode.clientWidth;this.scrollRange={x:d.viewport.width+this.width,y:d.viewport.height+this.height}},update:function(){this.position={x:this.offset.left-d.position.x,y:this.offset.top-d.position.y};this.scrollPercent={x:(d.viewport.width-this.position.x)/this.scrollRange.x,y:(d.viewport.height-this.position.y)/this.scrollRange.y};var l=this.visible;this.isVisible();this.onScroll();if(this.visible){this.onVisible.call(this)}if(this.visible!==l){this.onVisibilityChange.call(this);d.onWaypointChanged(this)}},isVisible:function(){return(this.visible=(this.position.y+this.height>0&&this.position.y<d.viewport.height&&this.position.x+this.width>=0&&this.position.x<d.viewport.width))},onScroll:function(){},onVisible:function(){},onVisibilityChange:function(){}};return k}());var f=function(){var k=this;this.applied=false;this.directions={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"};this.direction={x:this.directions.RIGHT,y:this.directions.DOWN};this.position={x:0,y:0};this.debugmode=false;this.viewport={width:g.documentElement.clientWidth,height:g.documentElement.clientHeight};this.visible={width:this.viewport.width,height:this.viewport.height};this.waypoints=[];this.queue=[];c.bind(e,"load",function(){k.applied=true;c.forEach(k.queue,function(){k.queue.splice(0,1)[0].setData()});c.bind(e,"scroll",function(){k.update()});k.update();k.onLoad();g.documentElement.className+=" scroll-loaded"})};f.prototype={debug:function(){if(this.debugmode){return}this.debugmode=true;var n=this.waypoints.length;var k;var l=g.createElement("div");var o={position:"fixed",zIndex:99999,top:"0px",right:"0px",background:"#000",color:"#fff",padding:"1em",font:'12px/1.4em "Consolas", "Courier New", monospace'};for(k in o){l.style[k]=o[k]}g.body.appendChild(l);while(n--){this.waypoints[n].debug()}var m=this.onScroll;this.onScroll=function(){var p="position: {x: "+this.position.x+", y: "+this.position.y+"}<br />";p+="viewport: {width: "+this.viewport.width+", height: "+this.viewport.height+"}<br />";p+="visible: {width: "+this.visible.width+", height: "+this.visible.height+"}<br />";p+="direction: {x: "+this.direction.x+", y: "+this.direction.y+"}<br />";l.innerHTML=p;m.call(this)};e.scroll(d.position.x+1,d.position.y+1);e.scroll(d.position.x-1,d.position.y-1)},update:function(){var l={x:this.position.x,y:this.position.y};this.position=h();this.viewport={width:g.documentElement.clientWidth,height:g.documentElement.clientHeight};this.visible={height:this.viewport.height+this.position.y,width:this.viewport.width+this.position.x};if(this.position.x>l.x){this.direction.x=this.directions.RIGHT}else{if(this.position.x<l.x){this.direction.x=this.directions.LEFT}}if(this.position.y>l.y){this.direction.y=this.directions.DOWN}else{if(this.position.y<l.y){this.direction.y=this.directions.UP}}var k=this.waypoints.length;while(k--){this.waypoints[k].update()}this.onScroll.call(this)},addWaypoint:function(k){var l=this;var n=[];if(typeof k==="string"){c.forEach(c.query(k),function(q,r){var o=new j(r);if(l.debugmode){o.debug()}o.uid=l.waypoints.length;l.waypoints.push(o);n.push(o);if(!l.applied){l.queue.push(o)}})}else{if("nodeName" in k){var m=new j(k);if(l.debugmode){m.debug()}m.uid=l.waypoints.length;l.waypoints.push(m);n.push(m);if(!l.applied){l.queue.push(m)}return m}else{c.forEach(k,function(q,r){var o=new j(r);if(l.debugmode){o.debug()}o.uid=l.waypoints.length;l.waypoints.push(o);n.push(o);if(!l.applied){l.queue.push(o)}})}}return n},scrollTo:function(k){var l=this;if(k instanceof j){if(k.uid>=this.waypoints.length){return}var m={y:k.offset.top,x:k.offset.left}}else{m=k}i(m.x,m.y,function(){l.update()})},onScroll:function(){},onWaypointChanged:function(){},onLoad:function(){}};var d=new f();return d}(this));